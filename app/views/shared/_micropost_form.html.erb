<head>
    <script src="http://code.jquery.com/jquery-1.5.js"></script>
    <script>
      function countChar(val) {
        var len = val.value.length;
        if (len >= 141) {
          val.value = val.value.substring(0, 140);
        } else {
          $('#charNum').text(140 - len);
        }
      };
    </script>
  </head>
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
  
    <%= f.text_area :content, placeholder: "Compose new micropost...", onkeyup: "countChar(this);", rows: 4 %>
	<div id="charNum"></div>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %>